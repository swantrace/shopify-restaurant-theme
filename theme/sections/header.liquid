{% assign links = linklists[section.settings.nav_menu].links %}
<div class="section-inner-wrapper">
  <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
    <a class="navbar-brand" href="#">Navbar</a>
    <button class="navbar-toggler" type="button" data-trigger="#main_nav">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="navbar-collapse" id="main_nav">
      <div class="offcanvas-header mt-3">  
        <button class="btn btn-outline-danger btn-close float-right"> &times Close </button>
        <h5 class="py-2 text-white">Main navbar</h5>
      </div>
      <ul class="navbar-nav">
        {% for link in links %}
        {% if link.links != blank %}
        {% assign first_level_index = forloop.index %}
        <li class="nav-item dropdown has-megamenu">
            <a class="nav-link dropdown-toggle first-level-nav-link{% if link.child_active %} active{% endif %}" data-toggle="dropdown" href="{{ link.url }}">{{ link.title | escape }}</a>
            <div class="dropdown-menu megamenu" tabindex="0">
              <div class="container-fluid">
                <div class="row">
                    {% for sublink in link.links %}
                        {% if sublink.links != blank %}
                            {% assign second_level_index = forloop.index %}
                            <div class="col-md-2">
                                <div class="col-megamenu">
                                    <a class="nav-link second-level-nav-link{% if sublink.active %} active{% endif %}" href="{{ sublink.url }}">{{ sublink.title | escape }}</a>
                                    <ul class="list-unstyled">
                                        {% for subsublink in sublink.links %}
                                            <li>
                                                <a href="{{ subsublink.url }}">{{ subsublink.title | escape }}</a>
                                            </li>
                                        {% endfor %}
                                    </ul>
                                </div>
                            </div>
                        {% else %}
                            <div class="col-md-2">
                                <div class="col-megamenu">
                                    <a class="nav-link second-level-nav-link{% if sublink.active %} active{% endif %}" href="{{ sublink.url }}"><img class="img-fluid" src="{{ sublink.object.featured_image | img_url }}">
                                    </a>
                                    <h6 class="product-title">
                                        <a class="nav-link second-level-nav-link{% if sublink.active %} active{% endif %}" href="{{ sublink.url }}">{{ sublink.object.title }}</a>
                                    </h6>
                                    <h4 class="product-price">{{ sublink.object.price | money }}</h4>
                                </div>
                            </div>
                        {% endif %}
                    {% endfor %}
                </div>
              </div>
            </div>
        </li>
        {% else %}
        <li class="nav-item{% if link.active %} active{% endif %}">
            <a class="nav-link first-level-nav-link" href="{{ link.url }}">{{ link.title | escape }}</a>
        </li>
        {% endif %}
        {% endfor %}

        <li class="nav-item d-flex">
            <a class="nav-link active" href="tel:{{ settings.phone }}">
                <i aria-hidden="true" class="fas fa-phone"></i>
            </a>
          {% if shop.customer_accounts_enabled %}
            <a class="nav-link active" href=" {% unless customer %}{{ routes.account_login_url }}{% else %}{{ routes.account_url }}{% endunless %}">
                <i aria-hidden="true" class="far fa-user"></i>
            </a>
            {% endif %}
            <a class="nav-link" href="{{ routes.cart_url }}">
                <i aria-hidden="true" class="fas fa-shopping-cart"></i>
            </a>
            <a class="nav-link" href="{{ routes.search_url }}">
                <i aria-hidden="true" class="fa fa-search"></i>
            </a>
        </li>
      </ul>
    </div> <!-- navbar-collapse.// -->
  </nav>
</div>

{% schema %}
{
   "name":{
      "en":"Header"
   },
   "tag": "header",
   "class":"static-section static-section-header",
   "settings":[
      {
         "type":"header",
         "content":{
            "en":"Background"
         }
      },
      {
         "type":"image_picker",
         "id":"img_bg",
         "label":{
            "en":"Background image"
         }
      },
      {
         "type":"color",
         "id":"color_bg",
         "label":{
            "en":"Background color"
         },
         "default":"rgba(0,0,0,0)"
      },
      {
         "type":"header",
         "content":{
            "en":"Layout"
         }
      },
      {
         "type":"select",
         "id":"section_width",
         "label":{
            "en":"Section Width"
         },
         "default":"full",
         "options":[
            {
               "label":{
                  "en":"Container Width"
               },
               "value":"container"
            },
            {
               "label":{
                  "en":"Full Width"
               },
               "value":"full"
            }
         ]
      },
      {
         "type":"checkbox",
         "id":"disable_on_mobile",
         "label":{
            "en":"Disable on mobile"
         },
         "default":false
      },
      {
         "type":"checkbox",
         "id":"disable_on_tablet",
         "label":{
            "en":"Disable on tablet"
         },
         "default":false
      },
      {
         "type":"checkbox",
         "id":"disable_on_desktop",
         "label":{
            "en":"Disable on desktop"
         },
         "default":false
      },
      {
         "type":"text",
         "id":"custom_classes",
         "label":{
            "en":"Custom class names assigned to inner wrapper div"
         }
      },
      {
        "type": "header",
        "content": {
          "en": "Header Logo"
        }
      },
      {
        "type": "image_picker",
        "id": "logo_img",
        "label":{
          "en":"Logo image"
        }
      },
    {
      "type": "header",
      "content": {
        "en": "Main menu"
      }
    },
    {
      "type": "link_list",
      "id": "nav_menu",
      "label": {
        "en": "Menu"
      },
      "default": "main-menu"
    },
    {
      "type":"select",
      "id":"style_for_desktop",
      "label":{
        "en":"Choose a style for desktop"
      },
      "default":"styleA",
      "options":[
        {
          "label":{
            "en":"Style A: Logo left with navigation right."
          },
          "value":"styleA"
        },
        {
          "label":{
            "en":"Style B: Logo centered with navigation below it."
          },
          "value":"styleB"
        }
      ]
    },
    {
      "type":"select",
      "id":"style_for_mobile",
      "label":{
        "en":"Choose a style for mobile"
      },
      "default":"styleA",
      "options":[
        {
          "label":{
            "en":"Style A: account, search, cart in the menu"
          },
          "value":"styleA"
        },
        {
          "label":{
            "en":"Style B: account, search, cart on the bottom"
          },
          "value":"styleB"
        }
      ]
    },
    {
      "type": "checkbox",
      "id": "display_phone_number",
      "label":{
        "en": "Display Phone Number"
      },
      "default": true
    }
  ]
}
{% endschema %}
