{% assign product = all_products[section.settings.onsale_product] %}
<div class="
  section-inner-wrapper
  pt-10
  py-lg-0
  {% if section.settings.disable_on_mobile %}disable_on_mobile{% endif %}
  {% if section.settings.disable_on_tablet %}disable_on_tablet{% endif %}
  {% if section.settings.disable_on_desktop %}disable_on_desktop{% endif %}
  {% if section.settings.style_for_desktop_and_mobile == 'styleA' %}style_for_desktop_and_mobile_a{% else %}style_for_desktop_and_mobile_b{% endif %}
  bg-{{ settings.default_style_mode }}">
  <counter-product
    data-product="{{ product | json |escape }}" 
    data-selected-or-first-available-variant="{{ product.selected_or_first_available_variant.id }}"
    data-options-with-values="{{ product.options_with_values | json | escape }}"
    data-style="{{ settings.default_style_mode }}"
    data-section-width="{{ section.settings.section_width }}"
    data-image-position="{{ section.settings.image_position }}"
    data-style-for-desktop-and-mobile="{{ section.settings.style_for_desktop_and_mobile }}"
    data-alignment="{{ section.settings.alignment }}"
    data-discount-deadline="{{ section.settings.discount_deadline }}"
    data-add-to-cart-button-text="{{ section.settings.add_to_cart_button_text}}"
    data-learn-more-button-text="{{ section.settings.learn_more_button_text }}"
  ></counter-product>
</div>

{% render 'common-section-styles' %}
<style>
  .detail-icon{
    background: none;
    font-size: 0.6rem;
    border: none;
  }
  .share-icon{
    background: none;
    font-size: 0.6rem;
    border: none;
  }

  #shopify-section-{{ section.id }} .featured-badge{
  background-color: #E54A55;
  padding: 4px;
  width: 100px;
  color: #fff;
  text-align: center;
  font-weight: 400;
  position: absolute;
  z-index: 100;
  top: 0;
  left: 0;
  border-bottom-right-radius: 20px;
}

#shopify-section-{{ section.id }} .style_for_desktop_and_mobile_a .featured-badge 
{
  top: 15%;
}

.style_for_desktop_and_mobile_b .featured-badge {
      top: 7px !important;
      transform: scale(1, calc(10/7));
}

  @media (min-width: 992px) {

  #shopify-section-{{ section.id }} .featured-badge.img-left{
    border-bottom-left-radius: 20px;
    border-bottom-right-radius: 0;
    right: 0;
    left: auto;
  }

  #shopify-section-{{ section.id }} .featured-badge.img-right{
    border-bottom-right-radius: 20px;
    border-bottom-left-radius: 0;
    left:0;
    right: auto;
  }

    #shopify-section-{{ section.id }} .variant-image-wrapper img {
      object-fit: cover;
      object-position: center center;
    }

    #shopify-section-{{ section.id }} .style_for_desktop_and_mobile_b .variant-image-wrapper {
      transform: scale(1, 0.7);
      overflow: hidden;
    }

    #shopify-section-{{ section.id }} .style_for_desktop_and_mobile_b .variant-image-wrapper img {
      transform: scale(1, calc(10/7));
    }

    #shopify-section-{{ section.id }} .onsale-product-container .variant-image-wrapper{
      height: 100%;
    }

  }

</style>

{% schema %}
{
  "name": {
    "en": "Counter"
  },
  "class": "index-section index-section--counter",
  "settings": [
    {
      "type": "header",
      "content": {
        "en": "Background"
      }
    },
    {
      "type": "image_picker",
      "id": "img_bg",
      "label": {
        "en": "Background image"
      }
    },
    {
      "type": "color",
      "id": "color_bg",
      "label": {
        "en": "Background color"
      }
    },
    {
      "type": "header",
      "content": {
        "en": "Layout"
      }
    },
    {
      "type": "select",
      "id": "section_width",
      "label": {
        "en": "Section Width"
      },
      "default": "full",
      "options": [
        {
          "label": {
            "en": "Container Width"
          },
          "value": "container"
        },
        {
          "label": {
            "en": "Full Width"
          },
          "value": "full"
        }
      ]
    },
    {
      "type": "checkbox",
      "id": "disable_on_mobile",
      "label":{
        "en": "Disable on mobile"
      },
      "default": false
    },
    {
      "type": "checkbox",
      "id": "disable_on_tablet",
      "label":{
        "en": "Disable on tablet"
      },
      "default": false
    },
    {
      "type": "checkbox",
      "id": "disable_on_desktop",
      "label":{
        "en": "Disable on desktop"
      },
      "default": false
    },
    {
      "type": "product",
      "id": "onsale_product",
      "label": {
        "en": "Product"
      }
    },
    {
      "type":"select",
      "id":"style_for_desktop_and_mobile",
      "label":{
        "en":"Choose a style for desktop and mobile"
      },
      "default":"styleA",
      "options":[
        {
          "label":{
            "en":"Style A"
          },
          "value":"styleA"
        },
        {
          "label":{
            "en":"Style B"
          },
          "value":"styleB"
        }
      ]
    },
    {
      "type": "select",
      "id": "image_position",
      "label": {
        "en": "Image position"
      },
      "default": "left",
      "options": [
        {
          "label": {
            "en": "Left"
          },
          "value": "left"
        },
        {
          "label": {
            "en": "Right"
          },
          "value": "right"
        }
      ]
    },
    {
      "type": "select",
      "id": "alignment",
      "label": {
        "en": "Content alignment"
      },
      "default": "center",
      "options":[
        {
          "label": {
            "en": "Left"
          },
          "value": "left"
        },
        {
          "label": {
            "en": "Center"
          },
          "value": "center"
        },
        {
          "label": {
            "en": "Right"
          },
          "value": "right"
        }
      ]
    },
    {
      "type": "text",
      "id": "discount_deadline",
      "label": {
        "en": "Discount deadline"
      },
      "placeholder": "2020-12-12/19:03"
    },
    {
      "type": "text",
      "id": "add_to_cart_button_text",
      "label": {
        "en": "Text of add-to-cart button"
      },
      "default": {
        "en": "ADD TO CART"
      }
    },
    {
      "type": "text",
      "id": "learn_more_button_text",
      "label": {
        "en": "Text of learn-more button"
      },
      "default": {
        "en": "LEARN MORE"
      }
    }
  ],
  "presets": [
    {
      "name": {
        "en": "Counter"
      },
      "category": {
        "en": "Product"
      }
    }
  ]
}
{% endschema %}